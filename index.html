<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>Aceable Piloting</title>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.0/css/bootstrap.min.css">
    </head>
    <body>
        <div id="app">
            <div v-for="product in products">
                <product-title v-bind:name="product.title"></product-title>
                <product-description v-bind:description="product.description"></product-description>
                <product-price v-bind:price="product.price"></product-price>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
        <script>
            var app = new Vue({
              el: '#app',
              data: {
                products: []
              },
              mounted() {
                axios({
                  method: "GET",
                  "url": "https://mkt-endpoint.now.sh/products"
                }).then(result => {
                  this.products = result.data.sort(function(a,b){return a.price - b.price});
                  console.log(result.data)
                }, error => {
                  console.error(error);
                });
              }
            })

            Vue.component('product-title', {
              template: '<div>{{name}}</div>',
              props: ['name']
            })

            Vue.component('product-description', {
              template: '<div>{{description}}</div>',
              props: ['description']
            })

            Vue.component('product-price', {
              template: '<div>${{price}}</div>',
              props: ['price']
            })
        </script>
    </body>
</html>
